#!/bin/sh

#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@@@@@@@@@@@Y:G@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@@@@@@@@@@?. :Y@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@@@@@@@@#!~~ 7^7&@@@@@@@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@@@@@@@B^!?~ 7J~~#@@@@@@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@@@@@@P^7??~ 7JJ7^P@@@@@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@@@@@J^7???~ 7J?J?^J@@@@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@@@@7^?????~ !J????^7&@@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@@#~~??????~ !J????J!~B@@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@@G^!???????~ !J?????J7^P@@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@@5^7????????~ !J??????J?^J@@@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@@@J^7?????????~ ~J?????????~!&@@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@@&7~???????????~ ~J?????????J!^B@@@@@@@@@@@@@@@
#@@@@@@@@@@@@@#~~????????????~ ~J??????????J7^5@@@@@@@@@@@@@@
#@@@@@@@@@@@@G^!?????????????~ ~J???????????J?^?@@@@@@@@@@@@@
#@@@@@@@@@@@5^7??????????????~ ~J??????????????~!#@@@@@@@@@@@
#@@@@@@@@@@?^????????????????~ ^J??????????????J!^G@@@@@@@@@@
#@@@@@@@@&!~?????????????????~ ^J???????????????J?^Y@@@@@@@@@
#@@@@@@@B~!??????????????????~ ^J??????????????????^7@@@@@@@@
#@@@@@@G^7???????????????????~ ^JJJJ???????????????J!~#@@@@@@
#@@@@@Y^7???????????????77!~^:.:^~!77??JJJ??????????J7^G@@@@@
#@@@@?^??????????77!!~^^^~!7?YYYJ?!~~^^^~!7???JJJ????J?^Y@@@@
#@@&!~?????77!~~~~~!7?JY55555555555555YJ?7!~^^~~!7???JJJ~7&@@
#@B~!?7!!~~!!7?JY5555555555555555555555555555YJ?7!~~~~!7?!~B@
#P::::^~!77?????????????????????????????????????????7!~^::.:P
#BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB#BB
#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#
#############################################################
# (c) 2023, Dipl.-Inf. T. Bergmann - astares.com
#############################################################

# Find script context where we run 
SCRIPT=$(realpath -s "$0")
SCRIPTPATH=$(dirname "$SCRIPT")

#************************************************************
# Utilities
#************************************************************
usage() { echo "Usage: $0 [-p <string>] " 1>&2; exit 1; }

#************************************************************
# Processing arguments
#************************************************************
while getopts ":p:h" o; do
    case "${o}" in
        p)
            p=${OPTARG}
            ;;
        h)
            usage
            ;;
    esac
done
# Shift arguments to the left by the number of arguments 
# processed by getopts which allows to remove options and arguments 
# that have been processed from the list of arguments, so that we 
# can focus on the remaining arguments.
shift $((OPTIND-1))

#************************************************************
# Check for required parameters
#************************************************************
if [ -z "${p}" ]; then
    echo "Parameter p was not specified\n";
    usage;
    exit;
fi

# Download Pharo into a /build directory
"$SCRIPTPATH/scripts/download_pharo.sh" $SCRIPTPATH  
